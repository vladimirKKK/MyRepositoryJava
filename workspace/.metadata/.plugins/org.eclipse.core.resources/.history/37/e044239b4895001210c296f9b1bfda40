package catalog;

import java.io.File;
import java.util.regex.*;

/**
 * Класс сбора информации о каталоге и его содержании.
 * 
 * @author Vladimir K.
 * 
 */
public class Test6 {
    /**
     * Метод рекурсивного вывода имен файлов в каталоге.
     * 
     * @param dir
     *            путь исходного каталога
     * @param regex
     *            шаблон поиска @
     */
    public static void printCatalog(String dir, String regex) {

        Pattern p = Pattern.compile(regex);

        File f1 = new File(dir);
        File s[] = f1.listFiles();
        /* цикл для просмотра содержимого каталога */
        for (int i = 0; i < s.length; i++) {
            String direct = s[i].toString();
            /* проверка каталог или файл */
            if (s[i].isDirectory()) {

                /* если каталог выполнить метод printCatalog() с новым путем */
                printCatalog(direct, regex);
            } else {
                /*
                 * если файл проверить на соответствие шаблону и вывести на
                 * консоль
                 */
                Matcher m = p.matcher(direct);
                if (m.matches())
                    System.out.println(s[i] + " is a file");
            }
        }
    }

    /**
     * Метод Main просмотра каталога.
     * 
     */
    public static void main(String args[]) {
        printCatalog("C:\\Documents and Settings\\Test", ".*\\xml");
    }
}
