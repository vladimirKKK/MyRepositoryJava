package catalog;

import java.io.File;
import java.text.SimpleDateFormat;
import java.util.regex.*;
import java.util.*;

/**
 * Класс сбора информации о каталоге и его содержании.
 * 
 * @author Vladimir K.
 * 
 */
public class FindFilesInCatalog {
    /**
     * Метод рекурсивного вывода имен файлов в каталоге.
     * 
     * @param dir
     *            путь исходного каталога
     * @param regex
     *            шаблон поиска @
     */
    public static List<String> printCatalog(String dir, String regex) {
        regex = ".*" + regex;
        Pattern p = Pattern.compile(regex);

        File f1 = new File(dir);
        File s[] = f1.listFiles();
        List<String> filesFound = new ArrayList<String>();
        /* цикл для просмотра содержимого каталога */
        for (int i = 0; i < s.length; i++) {
            String direct = s[i].toString();
            /* проверка каталог или файл */
            if (s[i].isDirectory()) {

                /* если каталог выполнить метод printCatalog() с новым путем */
                printCatalog(direct, regex);
            } else {
                /*
                 * если файл проверить на соответствие шаблону и вывести на
                 * консоль
                 */
                Matcher m = p.matcher(direct);
                if (m.matches())
                   
                    filesFound.add(s[i].toString());
//                long l = s[i].lastModified();
//                String s = (String)l;
//                Date t = new Date(Long.parseLong( ));
                SimpleDateFormat df = new SimpleDateFormat("dd-MM-yyyy");
                
                String timeIn = df.format(new java.util.Date(s[i].lastModified()));
                    System.out.println(timeIn);
                    String timeOut = "26-03-2013";
                    String t = (String)timeOut;
                    if(timeIn.compareTo(timeOut)==10) System.out.println("Yes");
            }
            direct = null;
        }
        return filesFound;
    }

    /**
     * Метод Main просмотра каталога.
     * 
     */
    public static void main(String args[]) {
        List<String> files= printCatalog("C:\\Documents and Settings\\Test", "xml");
        for(String s : files){
            System.out.println(s);
        }
    }
}
