package catalog;

import java.io.File;
import java.util.regex.*;
import java.util.*;

/**
 * Класс сбора информации о каталоге и его содержании.
 * 
 * @author Vladimir K.
 * 
 */
public class FindFilesInCatalog {
    /**
     * Метод рекурсивного вывода имен файлов в каталоге.
     * 
     * @param dir
     *            путь исходного каталога
     * @param regex
     *            шаблон поиска @
     */
    public static List<String> printCatalog(String dir, String regex) {
        regex = ".*" + regex;
        Pattern p = Pattern.compile(regex);

        File f1 = new File(dir);
        File s[] = f1.listFiles();
        List<String> filesFound = new ArrayList<String>();
        /* цикл для просмотра содержимого каталога */
        for (int i = 0; i < s.length; i++) {
            String direct = s[i].toString();
            /* проверка каталог или файл */
            if (s[i].isDirectory()) {

                /* если каталог выполнить метод printCatalog() с новым путем */
                printCatalog(direct, regex);
            } else {
                /*
                 * если файл проверить на соответствие шаблону и вывести на
                 * консоль
                 */
                Matcher m = p.matcher(direct);
                if (m.matches())
                   
                    filesFound.add(s[i].toString());
                    //System.out.println(s[i] + " is a file");
            }
            direct = null;
        }
        return filesFound;
    }

    /**
     * Метод Main просмотра каталога.
     * 
     */
    public static void main(String args[]) {
        List<String> files= printCatalog("C:\\Documents and Settings\\Test", "xml");
        for(String s : files){
            System.out.println(s);
        }
    }
}
