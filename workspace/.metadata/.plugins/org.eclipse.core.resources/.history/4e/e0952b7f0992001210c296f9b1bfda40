package xml;

import java.io.*;
import java.util.regex.*;

public class FindParticipantsOfPpresentation {
    public static void main(String[] args) throws FileNotFoundException,
    IOException {
        
        String fileName = "C:\\WORK\\JAVA\\Temp\\events.xml";
        FileReader fr = new FileReader(fileName);
        BufferedReader br = new BufferedReader(fr);
        StringBuilder stringBuffer = new StringBuilder();
        String line;
        
        Pattern regexP = Pattern.compile(".*\\<userId\\>([0-9]{1,3}).*");
        
        /* вывод полного названия файла */
        System.out.println(fileName);

        while ((line = br.readLine()) != null) {
            Matcher regexM = regexP.matcher(line);
            if (regexM.lookingAt()) {
                
                Pattern regexP2 = Pattern.compile(".*\\<callernumber\\>"+ regexM.group(1) + "([a-zA-Z\\s]*)\\<\\/callernumber\\>");
                Matcher regexM2 = regexP2.matcher(line);
                System.out.println(regexM.group(1) + "." + regexM2.group(1));
            }
            
            stringBuffer.append(line + "\n");
        }
        line = stringBuffer.toString();
        br.close();
        
        Matcher regexM = regexP.matcher(line);
        if (regexM.lookingAt()) System.out.println(regexM.group(1));
    }

}
